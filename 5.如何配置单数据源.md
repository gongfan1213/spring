
我来为您详细讲解这个 `DataSourceDemoApplication.java` 文件的内容和功能。

这是一个演示 Spring Boot 数据源配置和使用的示例程序，让我们逐部分分析：

1. **包声明和导入**
```java
package geektime.spring.data.datasourcedemo;

import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.jdbc.core.JdbcTemplate;
import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.SQLException;
```
- 导入了必要的 Spring Boot、数据库和日志相关的类

2. **类注解**
```java
@SpringBootApplication
@Slf4j
```
- `@SpringBootApplication`: Spring Boot 应用程序的主配置注解
- `@Slf4j`: Lombok 提供的日志注解，自动创建日志对象

3. **类定义和依赖注入**
```java
public class DataSourceDemoApplication implements CommandLineRunner {
    @Autowired
    private DataSource dataSource;

    @Autowired
    private JdbcTemplate jdbcTemplate;
```
- 实现 `CommandLineRunner` 接口，使应用启动后自动执行 `run` 方法
- 通过 `@Autowired` 注入数据源和 JdbcTemplate

4. **主方法**
```java
public static void main(String[] args) {
    SpringApplication.run(DataSourceDemoApplication.class, args);
}
```
- 应用程序的入口点
- 启动 Spring Boot 应用

5. **CommandLineRunner 实现**
```java
@Override
public void run(String... args) throws Exception {
    showConnection();
    showData();
}
```
- 应用启动后自动执行的方法
- 依次调用 `showConnection()` 和 `showData()`

6. **数据库连接演示**
```java
private void showConnection() throws SQLException {
    log.info(dataSource.toString());
    Connection conn = dataSource.getConnection();
    log.info(conn.toString());
    conn.close();
}
```
- 打印数据源信息
- 获取并打印数据库连接信息
- 关闭数据库连接

7. **数据查询演示**
```java
private void showData() {
    jdbcTemplate.queryForList("SELECT * FROM FOO")
            .forEach(row -> log.info(row.toString()));
}
```
- 使用 JdbcTemplate 查询 FOO 表的所有数据
- 将查询结果打印到日志

### 程序功能说明：

1. **数据源配置**：
   - 通过 Spring Boot 自动配置数据源
   - 默认使用 H2 内存数据库（需要添加相关依赖）

2. **数据库操作**：
   - 演示了基本的数据库连接获取
   - 展示了使用 JdbcTemplate 进行数据查询

3. **日志输出**：
   - 使用 SLF4J 进行日志记录
   - 输出数据源和连接信息
   - 输出查询结果

### 使用说明：

1. **运行前准备**：
   - 需要配置数据库连接信息（application.properties/yml）
   - 需要创建 FOO 表并插入测试数据

2. **运行方式**：
   - 直接运行 main 方法
   - 或使用 Maven/Gradle 命令启动

3. **预期输出**：
   - 数据源配置信息
   - 数据库连接信息
   - FOO 表中的数据记录

### 技术要点：

1. **Spring Boot 自动配置**：
   - 自动配置数据源
   - 自动配置 JdbcTemplate

2. **依赖注入**：
   - 使用 `@Autowired` 注入 Spring 管理的 Bean

3. **数据库访问**：
   - 使用 JdbcTemplate 进行数据访问
   - 演示了基本的数据库操作

4. **日志处理**：
   - 使用 Lombok 简化日志配置
   - 使用 SLF4J 进行日志记录

这个示例程序展示了 Spring Boot 中数据源的基本配置和使用方法，是学习 Spring Boot 数据库操作的入门示例。


![image](https://github.com/user-attachments/assets/721ca103-c58f-4d57-97d0-a5f0f6859440)



![image](https://github.com/user-attachments/assets/cc71e726-74bf-4853-886b-b0941321979d)



![image](https://github.com/user-attachments/assets/9779d7f1-2cb9-4090-b769-8ab726f19293)



![image](https://github.com/user-attachments/assets/4b60902f-c6ca-40c7-8db4-41a7275134d2)



![image](https://github.com/user-attachments/assets/0f6a9c16-78ad-4983-9dad-4aa13830e08d)



![image](https://github.com/user-attachments/assets/366c8d36-e8f6-4f76-91fe-301804165b28)



![image](https://github.com/user-attachments/assets/626331d1-1198-45d4-81a2-39ea5bac149a)













